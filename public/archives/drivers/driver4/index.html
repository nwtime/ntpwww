<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
  
  

  
  <meta name="description" content="Author: David L. Mills (mills@udel.edu)
Last update: 11-Sep-2010 05:56 UTC

Table of Contents

Synopsis
Description
PPS Signal Processing
Monitor Data â€¦">
<meta property="og:title" content="Spectracom WWVB/GPS Receivers" />
<meta property="og:description" content="Author: David L. Mills (mills@udel.edu)
Last update: 11-Sep-2010 05:56 UTC
 Table of Contents  Synopsis Description PPS Signal Processing Monitor Data Fudge Factors   Synopsis Address: 127.127.4.u
Reference ID: WWVB
Driver ID: WWVB_SPEC
Serial Port: /dev/wwvb_u_; 9600 baud, 8-bits, no parity
Features: Optional PPS signal processing, tty_clk
Requires: Optional PPS signal processing requires the PPSAPI signal interface.
 Description This driver supports all known Spectracom radio and satellite clocks, including the Model 8170 and Netclock/2 WWVB Synchronized Clocks and the Netclock/GPS GPS Master Clock." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://doc.ntp.org/archives/drivers/driver4/" /><meta property="article:section" content="archives" />

<meta property="og:site_name" content="NTP: Network Time Protocol" />



  
  <title>Spectracom WWVB/GPS Receivers</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="NTP Documentation Archive">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/latest/normalize.css">
  
    <link rel="stylesheet" href="https://doc.ntp.org/plugins/bootstrap/bootstrap.min.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://doc.ntp.org/scss/nwtime.min.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://doc.ntp.org/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://doc.ntp.org/images/favicon.png " type="image/x-icon">
</head>
<body><!-- navigation -->
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

<header class="sticky-top navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light py-0">
		<div class="d-flex align-items-center" style="height:100px; width:100px;">
		 <a class="navbar-brand py-0" href="https://doc.ntp.org/"><img class="img-fluid" src="https://doc.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
      </div>
	  <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="bi-plus"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav ml-auto py-0">
          <li class="nav-item py-0">
            <a class="nav-link py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/"></a>
          </li>
          
          
          <li class="nav-item py-0">
            <a class="nav-link py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://www.nwtime.org">Network Time Foundation</a>
          </li>
          
          
          
          <li class="nav-item dropdown py-0">
            <a class="nav-link dropdown-toggle py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Reference Library
            </a>
            <div class="dropdown-menu">
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/brief">Briefs</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/memos">Memos</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/reports">Reports</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/rfc">RFCs</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/software">Software</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/reflib/papers">White Papers</a>
              
            </div>
          </li>
          
          
          
          <li class="nav-item dropdown py-0">
            <a class="nav-link dropdown-toggle py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Docs
            </a>
            <div class="dropdown-menu">
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.2.8-series/toc">4.2.8-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.2.6-series/toc">4.2.6-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.2.4-series/toc">4.2.4-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.2.2-series/toc">4.2.2-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.2.0/toc">4.2.0</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.1.2/toc">4.1.2</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.1.1/toc">4.1.1</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/4.1.0/toc">4.1.0</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://doc.ntp.org/archives/3-5.93e/toc">3-5.93e</a>
              
            </div>
          </li>
          
          
        </ul>
	<div class="navbar-nav d-none d-lg-block">
</div>
      </div>
    </nav>
  </div>
  <div class="header-border">
  </div>
</header>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://doc.ntp.org/archives/">Docs</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://doc.ntp.org/archives/drivers/">Drivers</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://doc.ntp.org/archives/drivers/driver4/">Spectracom WWVB/GPS Receivers</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>Spectracom WWVB/GPS Receivers</h1>
     
    <p>Author: David L. Mills (<a href="mailto:mills@udel.edu">mills@udel.edu</a>)<br>
Last update: 11-Sep-2010 05:56 UTC</p>
<hr>
<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><a href="/archives/drivers/driver4/#synopsis">Synopsis</a></li>
<li><a href="/archives/drivers/driver4/#description">Description</a></li>
<li><a href="/archives/drivers/driver4/#pps-signal-processing">PPS Signal Processing</a></li>
<li><a href="/archives/drivers/driver4/#monitor-data">Monitor Data</a></li>
<li><a href="/archives/drivers/driver4/#fudge-factors">Fudge Factors</a></li>
</ul>
<hr>
<h4 id="synopsis">Synopsis</h4>
<p>Address: 127.127.4.<em>u</em><br>
Reference ID: <tt>WWVB</tt><br>
Driver ID: <tt>WWVB_SPEC</tt><br>
Serial Port: <tt>/dev/wwvb_u_</tt>; 9600 baud, 8-bits, no parity<br>
Features: Optional PPS signal processing, <tt>tty_clk</tt><br>
Requires: Optional PPS signal processing requires the PPSAPI signal interface.</p>
<hr>
<h4 id="description">Description</h4>
<p>This driver supports all known Spectracom radio and satellite clocks, including the Model 8170 and Netclock/2 WWVB Synchronized Clocks and the Netclock/GPS GPS Master Clock. The claimed accuracy of the WWVB clocks is 100 <span class="style1">m</span>s relative to the broadcast signal. These clocks have proven a reliable source of time, except in some parts of the country with high levels of conducted RF interference. WIth the GPS clock the claimed accuracy is 130 ns. However, in most cases the actual accuracy is limited by the precision of the timecode and the latencies of the serial interface and operating system.</p>
<p>The DIPswitches on these clocks should be set to 24-hour display, AUTO DST off, data format 0 or 2 (see below) and baud rate 9600. If this clock is used as the source for the IRIG Audio Decoder (<tt>refclock_irig.c</tt> in this distribution), set the DIPswitches for AM IRIG output and IRIG format 1 (IRIG B with signature control).</p>
<p>There are two timecode formats used by these clocks. Format 0, which is available with all clocks, and format 2, which is available with all clocks except the original (unmodified) Model 8170.</p>
<p>Format 0 (22 ASCII printing characters):</p>
<pre> 
&lsaquo;cr&rsaquo;&lsaquo;lf&rsaquo;i ddd hh:mm:ss TZ=zz&lsaquo;cr&rsaquo;&lsaquo;lf&rsaquo;
</pre>
<p><code>on-time</code> = first â€¹crâ€ºâ€¹lfâ€º<br>
<code>i</code> = synchronization flag (<code>' '</code> = in synch, <code>?</code> = out synch)<br>
<code>hh:mm:ss</code> = hours, minutes, seconds</p>
<p>The alarm condition is indicated by other than <code>' '</code> at <code>i</code>, which occurs during initial synchronization and when received signal is lost for about ten hours.</p>
<p>Format 2 (24 ASCII printing characters):</p>
<pre>
&lsaquo;cr&rsaquo;&lsaquo;lf&rsaquo;iqyy ddd hh:mm:ss.fff ld
</pre>
<p><code>on-time</code> = â€¹crâ€ºâ€¹lfâ€º<br>
<code>i</code> = synchronization flag (<code>' '</code> = in synch, <code>?</code> = out synch)<br>
<code>q</code> = quality indicator (<code>' '</code> = locked, <code>A</code>&hellip;<code>D</code> = unlocked)<br>
<code>yy</code> = year (as broadcast)<br>
<code>ddd</code> = day of year<br>
<code>hh:mm:ss.fff</code> = hours, minutes, seconds, milliseconds</p>
<p>The alarm condition is indicated by other than <code>' '</code> at <code>i</code>, which occurs during initial synchronization and when received signal is lost for about ten hours. The unlock condition is indicated by other than <code>' '</code> at <code>q</code>.</p>
<p>The <code>q</code> is normally <code>' '</code> when the time error is less than 1 ms and a character in the set <code>A...D</code> when the time error is less than 10, 100, 500 and greater than 500 ms respectively. The <code>l</code> is normally <code>' '</code>, but is set to <code>L</code> early in the month of an upcoming UTC leap second and reset to <code>' '</code> on the first day of the following month. The <code>d</code> is set to <code>S</code> for standard time <code>S</code>, <code>I</code> on the day preceding a switch to daylight time, <code>D</code> for daylight time and <code>O</code> on the day preceding a switch to standard time. The start bit of the first â€¹crâ€º is synchronized to the indicated time as returned.</p>
<p>This driver does not need to be told which format is in use - it figures out which one from the length of the message. A three-stage median filter is used to reduce jitter and provide a dispersion measure. The driver makes no attempt to correct for the intrinsic jitter of the radio itself, which is a known problem with the older radios.</p>
<hr>
<h4 id="pps-signal-processing">PPS Signal Processing</h4>
<p>When PPS signal processing is enabled, and when the system clock has been set by this or another driver and the PPS signal offset is within 0.4 s of the system clock offset, the PPS signal replaces the timecode for as long as the PPS signal is active. If for some reason the PPS signal fails for one or more poll intervals, the driver reverts to the timecode. If the timecode fails for one or more poll intervals, the PPS signal is disconnected.</p>
<hr>
<h4 id="monitor-data">Monitor Data</h4>
<p>The driver writes each timecode as received to the <tt>clockstats</tt> file. When enabled by the <tt>flag4</tt> fudge flag, a table of quality data maintained internally by the Netclock/2 is retrieved and written to the <tt>clockstats</tt> file when the first timecode message of a new day is received.</p>
<hr>
<h4 id="fudge-factors">Fudge Factors</h4>
<dl>
<dt><tt>time1 _time_</tt></dt>
<dd>Specifies the PPS time offset calibration factor, in seconds and fraction, with default 0.0.</dd>
<dt><tt>time2 _time_</tt></dt>
<dd>Specifies the serial time offset calibration factor, in seconds and fraction, with default 0.0.</dd>
<dt><tt>stratum _number_</tt></dt>
<dd>Specifies the driver stratum, in decimal from 0 to 15, with default 0.</dd>
<dt><tt>refid _string_</tt></dt>
<dd>Specifies the driver reference identifier, an ASCII string from one to four characters, with default <tt>WWVB</tt>.</dd>
<dt><tt>flag1 0 | 1</tt></dt>
<dd>Disable PPS signal processing if 0 (default); enable PPS signal processing if 1.</dd>
<dt><tt>flag2 0 | 1</tt></dt>
<dd>If PPS signal processing is enabled, capture the pulse on the rising edge if 0 (default); capture on the falling edge if 1.</dd>
<dt><tt>flag3 0 | 1</tt></dt>
<dd>If PPS signal processing is enabled, use the <tt>ntpd</tt> clock discipline if 0 (default); use the kernel discipline if 1.</dd>
<dt><tt>flag4 0 | 1</tt></dt>
<dd>Enable verbose <tt>clockstats</tt> recording if set.</dd>
</dl>

	  
  </div>
</section>
<footer class="navbar site-footer fixed-bottom py-0">
  <ul class="mx-auto">
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Mailing lists" aria-label="Mailing lists">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://lists.ntp.org/listinfo">
        <i class="bi-envelope"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
        <i class="bi-twitter"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
        <i class="bi-linkedin"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Facebook" aria-label="Facebook">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
        <i class="bi-facebook"></i>
      </a>
    </li>
    
    <li class="navbar-text">
      <p>&copy; 2021 <a class="navbar-text text-white" href="https://www.nwtime.org">Network Time Foundation</a></p>	
    </li>
  </ul>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>









<script src="/js/main.min.ad396f5ec05b650939dd4f6fe40c9a7474e1e5cffab299383281b366113ce6bd.js" integrity="sha256-rTlvXsBbZQk53U9v5AyadHTh5c/6spk4MoGzZhE85r0=" crossorigin="anonymous"></script>



  </body>
</html>