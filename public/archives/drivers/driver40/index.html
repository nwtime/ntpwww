<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
  
  

  
  <meta name="description" content="Last update: 12-Oct-2017 09:05 UTC         
JAPANESE

Table of Contents

Synopsis
Description
Mode-1
Mode-2
Mode-3
Mode-4
Mode-5
Mode-6
Mode-100 â€¦">
<meta property="og:title" content="JJY Receivers" />
<meta property="og:description" content="Last update: 12-Oct-2017 09:05 UTC JAPANESE
 Table of Contents  Synopsis Description Mode-1 Mode-2 Mode-3 Mode-4 Mode-5 Mode-6 Mode-100 Monitor Data Fudge Factors   Synopsis Address: 127.127.40._u_  Reference ID: JJY
Driver ID: JJY
Serial Port: /dev/jjy_u_; See corresponding receiver
 Description This driver supports the following JJY receivers and the GPS clock sold in Japan, and the time service through a telephone line.
   Model Mode Language     Tristate Ltd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/drivers/driver40/" /><meta property="article:section" content="archives" />

<meta property="og:site_name" content="NTP: Network Time Protocol" />



  
  <title>JJY Receivers</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="NTP Documentation Archive">
  
  <meta name="generator" content="Hugo 0.84.1" />

  <!-- Plugins -->
  
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/latest/normalize.css">
  
    <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="/scss/nwtime.min.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="/images/favicon.png " type="image/x-icon">
</head>
<body><!-- navigation -->
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

<header class="sticky-top navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-light py-0">
		<div class="d-flex align-items-center" style="height:100px; width:100px;">
		 <a class="navbar-brand py-0" href="/"><img class="img-fluid" src="/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
      </div>
	  <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="bi-plus"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <ul class="navbar-nav ml-auto py-0">
          <li class="nav-item py-0">
            <a class="nav-link py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/"></a>
          </li>
          
          
          <li class="nav-item py-0">
            <a class="nav-link py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="https://www.nwtime.org">Network Time Foundation</a>
          </li>
          
          
          
          <li class="nav-item dropdown py-0">
            <a class="nav-link dropdown-toggle py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Reference Library
            </a>
            <div class="dropdown-menu">
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/brief">Briefs</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/memos">Memos</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/reports">Reports</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/rfc">RFCs</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/software">Software</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/reflib/papers">White Papers</a>
              
            </div>
          </li>
          
          
          
          <li class="nav-item dropdown py-0">
            <a class="nav-link dropdown-toggle py-0" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Docs
            </a>
            <div class="dropdown-menu">
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.2.8-series/toc">4.2.8-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.2.6-series/toc">4.2.6-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.2.4-series/toc">4.2.4-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.2.2-series/toc">4.2.2-series</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.2.0/toc">4.2.0</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.1.2/toc">4.1.2</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.1.1/toc">4.1.1</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/4.1.0/toc">4.1.0</a>
              
              <a class="dropdown-item" style="text-decoration: none; font-size: 16px; font-family: 'Nunito Sans', sans-serif;" href="/archives/3-5.93e/toc">3-5.93e</a>
              
            </div>
          </li>
          
          
        </ul>
	<div class="navbar-nav d-none d-lg-block">
</div>
      </div>
    </nav>
  </div>
  <div class="header-border">
  </div>
</header>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="/archives/">Docs</a>
</li>




<li class="breadcrumb-item" >
	<a href="/archives/drivers/">Drivers</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/archives/drivers/driver40/">JJY Receivers</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>JJY Receivers</h1>
     
    <p>Last update: 12-Oct-2017 09:05 UTC         <br>
<a href="/archives/drivers/driver40-ja">JAPANESE</a></p>
<hr>
<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><a href="/archives/drivers/driver40/#synopsis">Synopsis</a></li>
<li><a href="/archives/drivers/driver40/#description">Description</a></li>
<li><a href="/archives/drivers/driver40/#mode-1">Mode-1</a></li>
<li><a href="/archives/drivers/driver40/#mode-2">Mode-2</a></li>
<li><a href="/archives/drivers/driver40/#mode-3">Mode-3</a></li>
<li><a href="/archives/drivers/driver40/#mode-4">Mode-4</a></li>
<li><a href="/archives/drivers/driver40/#mode-5">Mode-5</a></li>
<li><a href="/archives/drivers/driver40/#mode-6">Mode-6</a></li>
<li><a href="/archives/drivers/driver40/#mode-100">Mode-100</a></li>
<li><a href="/archives/drivers/driver40/#monitor-data">Monitor Data</a></li>
<li><a href="/archives/drivers/driver40/#fudge-factors">Fudge Factors</a></li>
</ul>
<hr>
<h4 id="synopsis">Synopsis</h4>
<p>Address: <code>127.127.40._u_ </code>
Reference ID: <code>JJY</code><br>
Driver ID: <code>JJY</code><br>
Serial Port: <code>/dev/jjy_u_</code>; See corresponding receiver</p>
<hr>
<h4 id="description">Description</h4>
<p>This driver supports the following JJY receivers and the GPS clock sold in Japan, and the time service through a telephone line.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Mode</th>
<th>Language</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.tristate.ne.jp/">Tristate Ltd.   TS-JJY01, TS-JJY02</a></td>
<td><a href="/archives/drivers/driver40/#mode-1">1</a></td>
<td>Japanese only</td>
</tr>
<tr>
<td><a href="http://www.c-dex.co.jp/">C-DEX Co.,Ltd.   JST2000</a></td>
<td><a href="/archives/drivers/driver40/#mode-2">2</a></td>
<td>Japanese only</td>
</tr>
<tr>
<td>Echo Keisokuki Co.,Ltd.   LT-2000</td>
<td><a href="/archives/drivers/driver40/#mode-3">3</a></td>
<td></td>
</tr>
<tr>
<td><a href="https://tic.citizen.co.jp/english/index.html">CITIZEN T.I.C. CO.,LTD.   JJY-200</a></td>
<td><a href="/archives/drivers/driver40/#mode-4">4</a></td>
<td>Japanese only</td>
</tr>
<tr>
<td><a href="http://www.tristate.ne.jp/">Tristate Ltd.   TS-GPSclock-01</a></td>
<td><a href="/archives/drivers/driver40/#mode-5">5</a></td>
<td>Japanese only</td>
</tr>
<tr>
<td><a href="http://www.seiko-sts.co.jp/">SEIKO TIME SYSTEMS INC.   TDC-300</a></td>
<td><a href="/archives/drivers/driver40/#mode-6">6</a></td>
<td>English and Japanese</td>
</tr>
<tr>
<td><a href="http://jjy.nict.go.jp/">Telephone JJY</a></td>
<td><a href="/archives/drivers/driver40/#mode-100">100</a></td>
<td>English and Japanese</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="mode-1">Mode-1</h4>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 1</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN   flag1 0|1   flag2 0|1   time2 H</code></p>
<p><code>time1</code> may specify a constant to be added to the time offset for the time from the receiver, a fixed-point decimal number in seconds. You may specify the time offset from several tens of milli-seconds (0.0NN seconds) to a hundred and several tens of milli-seconds (0.1NN seconds) for this clock.</p>
<p><code>time2</code> may specify a grace period in hours after the &lsquo;adjusted&rsquo; reply of the STUS command stopped coming.  This hours is effective when both flag1 and flag2 are set to 1.</p>
<p><code>flag1</code> has no effect for time synchronization unless <code>flag2</code> is set to 1.  When flag1 is set to 1, status commands are issued before DATE and STIM commands, and write a response text into the clockstats file.</p>
<p><strong>fudge flag1</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>DCST and STUS commands are not issued</td>
</tr>
<tr>
<td><code>1</code></td>
<td>DCST and STUS commands are issued</td>
</tr>
</tbody>
</table>
<p><code>flag2</code> enables the time synchronization only when the reply of the STUS is &lsquo;adjusted&rsquo;. When this functionality is used, flag1 must be set to 1 together.</p>
<p><strong>fudge flag2</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>Always</td>
</tr>
<tr>
<td><code>1</code></td>
<td>&lsquo;adjusted&rsquo; only</td>
</tr>
</tbody>
</table>
<p><strong>Interface</strong></p>
<p>RS-232C, 9600 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dcst{CR}{LF}</code></td>
<td><code>valid{CR}{LF}</code> | invalid{CR}{LF}`</td>
</tr>
<tr>
<td><code>stus{CR}{LF}</code></td>
<td><code>adjusted{CR}{LF}</code> | unadjusted{CR}{LF}`</td>
</tr>
<tr>
<td><code>time{CR}{LF}</code></td>
<td><code>HH:MM:SS{CR}{LF}</code></td>
</tr>
<tr>
<td><code>date{CR}{LF}</code></td>
<td><code>YYYY/MM/DD WWW{CR}{LF}</code></td>
</tr>
<tr>
<td><code>stim{CR}{LF}</code></td>
<td><code>HH:MM:SS{CR}{LF}</code></td>
</tr>
</tbody>
</table>
<p>The date and time are requested separately. The time is requested before and after the date request to check uncertainty of the date whether it&rsquo;s before or after midnight.</p>
<hr>
<h4 id="mode-2">Mode 2</h4>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 2</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN</code></p>
<p><strong>Interface</strong></p>
<p>RS-232C, 9600 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{ENQ}1J{ETX}</code></td>
<td><code>{STX}JYYMMDDWHHMMSSS{ETX}</code></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="mode-3">Mode-3</h4>
<p>Echo Keisokuki was dissolved. Some business of the company was taken over by FreqTime Co., Ltd. in July, 2015.</p>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 3</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN</code></p>
<p><strong>Interface</strong></p>
<p>RS-232C, 9600 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>C</code></td>
<td>(Mode 2 : Continuous)</td>
</tr>
<tr>
<td>(Every second before 0.5 second)</td>
<td><code>YYMMDDWHHMMSS{ST1}{ST2}{ST3}{ST4}{CR}</code></td>
</tr>
<tr>
<td><code>#</code></td>
<td>(Mode 1 : Request&amp;Send)</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="mode-4">Mode-4</h4>
<p>The JJY-200 became the end of sales in 2013.</p>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 4</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN</code></p>
<p><strong>Interface</strong></p>
<p>RS-232C, 4800 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td>(Every second)</td>
<td><code>'XX YY/MM/DD W HH:MM:SS{CR}</code></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="mode-5">Mode-5</h4>
<p>This driver supports the Tristate TS-GPSclock-01 in command/response mode, though it is a GPS clock, not JJY radio clock. Using the menus and the onboard switches, the TS-GPSclock-01 should be set to command/response mode and JST time zone.</p>
<p>Besides this driver (Type 40), <a href="/archives/drivers/driver20">the generic NMEA GPS driver (Type 20)</a> supports the TS-GPSclock-01 in NMEA mode.</p>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 5</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN   flag1 0|1</code></p>
<p><code>time1</code> may specify a constant to be added to the time offset for the time from the receiver, a fixed-point decimal number in seconds.</p>
<p><code>flag1</code> has no effect for time synchronization. When a flag1 is set to 1, status command is issued before DATE and TIME commands, and write a response text into a clockstats file.</p>
<p><strong>fudge flag1</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>STUS command is not issued</td>
</tr>
<tr>
<td><code>1</code></td>
<td>STUS command is issued</td>
</tr>
</tbody>
</table>
<p><strong>Interface</strong></p>
<p>USB (<code>/dev/ttyACM_0_</code>)</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>stus{CR}{LF}</code></td>
<td><code>*R{CR}{LF}|*G{CR}{LF}|*U{CR}{LF}|+U{CR}{LF}</code></td>
</tr>
<tr>
<td><code>time{CR}{LF}</code></td>
<td><code>HH:MM:SS{CR}{LF}</code></td>
</tr>
<tr>
<td><code>date{CR}{LF}</code></td>
<td><code>YYYY/MM/DD{CR}{LF}</code></td>
</tr>
</tbody>
</table>
<p>The date and time are requested separately. The time is requested before and after the date request to check uncertainty of the date whether it&rsquo;s before or after midnight.</p>
<hr>
<h4 id="mode-6">Mode-6</h4>
<p>The TDC-300 must be set to the type 3 data format using the front panel menu display and the switches.</p>
<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode 6</code></p>
<p><code>fudge   127.127.40.X   time1 0.NNN</code></p>
<p><strong>Interface</strong></p>
<p>RS-232C, 2400 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>{STX}YYMMDDWHHMMSS{ETX}</code></td>
</tr>
<tr>
<td>(5 to 10 mSec. before second)</td>
<td><code>{STX}{xE5}{ETX}</code></td>
</tr>
</tbody>
</table>
<hr>
<h4 id="mode-100">Mode-100</h4>
<p>The telephone JJY is the time service through a public telephone line.</p>
<p>The service is provided by the National Institute of Information and Communications Technology in Japan.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">ATTENTION</h4>

    This mode, the telephone JJY, can not be used with refclock_acts (type 18) at the same time. Because the &ldquo;phone&rdquo; statement in the ntp configuration file is not involved with the &ldquo;server&rdquo; statement, both the refclock_acts (type 18) and this refclock_jjy (type 40, mode 100 to 180) can not recognize the appropriate &ldquo;phone&rdquo; statement among the &ldquo;phone&rdquo; statements.

</div>

<p><strong>NTP configuration (ntp.conf)</strong></p>
<p><code>server   127.127.40.X   mode (100, 101 to 180)   minpoll N</code></p>
<p>When mode 100 is specified, this driver does not issue the loopback command in order to measure the delay, and the delay of the telephone line and the system processing is not adjusted.</p>
<p>When mode 101 to 180 is specified, this driver issues the loopback command and measures the delay of the telephone line and the system processing through the Telphone JJY loopback circuit.</p>
<p>The round trip time through the Telphone JJY loopback circuit is measured 5 times, and each delay time is greater than 700 milli-seconds, that delay time is ignored during average delay time calculation. Also, if the valid delay time ( &lt;= 700 mS.) is measured more than 3 times, the maximum delay time among the valid delay times is ignored, and if the valid delay time is measured more than 4 times, the minimum delay time among them is ignored, like marking/grading sports judgment.</p>
<p>The adjustment time is calculated by the formula,<br>
multiply (the measured round trip time) by <code>( ( the mode number ) - 100) %</code>,<br>
and the adjustment delay time is added to the syncronizing time.</p>
<p>If you choose the automatic delay adjustment, in other words, the mode 101 to 180 is specifed, the recommended mode number is 145 to 165.</p>
<p>The default polling interval 6 (64 seconds) is too short for this mode. The &ldquo;minpoll&rdquo; should be set to greater than or equal to 8 (256 seconds, about 4 minutes).</p>
<p>The interval time is given the value in second power of 2. The minpoll value 12 is 4096 seconds interval (about 1 hour), 14 is 16384 seconds interval (about 4.5 hours), 16 is 65536 seconds (about 18 hours), respectively.</p>
<p><code>fudge   127.127.40.X   flag1 0|1   flag2 0|1   flag3 0|1   flag4 0|1</code></p>
<p><code>time1</code> may specify a constant to be added to the time offset for the time from the receiver, a fixed-point decimal number in seconds.</p>
<p>When mode 100 is specified, time1 may be specified in order to adjust the time offset.</p>
<p>When mode 101 to 180 is specified, time1 should not be specified because this driver adds some percentage of the measured loopback delay, depending on the value of the mode number.</p>
<p>Flag1 is the modem dialing type.</p>
<p><strong>fudge flag1</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>AT Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>Tone</td>
<td><code>ATDWTnn...nn</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td>Pulse</td>
<td><code>ATDWPnn...nn</code></td>
</tr>
</tbody>
</table>
<p>Flag2 is the modem error correction type.</p>
<p><strong>&ldquo;fudge flag2&rdquo;</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>AT Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>Normal</td>
<td><code>AT\N0</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td>Auto V42, MNP, Normal</td>
<td><code>AT\N3</code></td>
</tr>
</tbody>
</table>
<p>Flag3 is the modem speaker switch.</p>
<p><strong>&ldquo;fudge flag3</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>AT Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>Off</td>
<td><code>ATM0Ln</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td>On</td>
<td><code>ATM2Ln</code></td>
</tr>
</tbody>
</table>
<p>Flag4 is the modem speaker volume.</p>
<p><strong>fudge flag4</strong></p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>AT Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>0</code> (Default)</td>
<td>Low</td>
<td><code>ATMnL1</code></td>
</tr>
<tr>
<td><code>1</code></td>
<td>Middle</td>
<td><code>ATMnL2</code></td>
</tr>
</tbody>
</table>
<p><strong>phone 042NNNNNNN</strong></p>
<p>The phone number is available at <a href="http://jjy.nict.go.jp/">http://jjy.nict.go.jp/</a>.</p>
<p>The number of digits of the phone number is checked. If the international access number and the country number are added in order to call from outside of Japan, the number of digits is over the limit.</p>
<p>The first 2 or 3 digits are checked. The emergency service number and the special service number in Japan are not allowed.</p>
<p>Calling from extension line, the number for an outside line should be prefix &ldquo;0,&rdquo; (Zero, Comma). The prefix is also checked, and no other outside access number is allowed.</p>
<p><strong>Interface</strong></p>
<p>RS-232C or USB, 2400 BPS, 8-bits, no parity, 1 stop bit</p>
<p><strong>Modem control commands:</strong></p>
<p><code>ATE0Q0V1, ATMnLn, AT&amp;K4, AT+MS=V22B, AT%C0, AT\Nn, ATH1, ATDWxnn...nn</code><br>
<code>+++, ATH0</code></p>
<p><strong>Time code format</strong></p>
<table>
<thead>
<tr>
<th>Prompt</th>
<th>Command</th>
<th>Reply</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Name{SP}?{SP}</code></td>
<td><code>TJJY{CR}</code></td>
<td>Welcome messages</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>LOOP{CR}</code></td>
<td>Switch to the loopback circuit</td>
</tr>
<tr>
<td></td>
<td><code>(One char.)</code></td>
<td><code>(One char.)</code></td>
</tr>
<tr>
<td></td>
<td><code>COM{CR}</code></td>
<td>Exit from the loopback circuit)</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>TIME{CR}</code></td>
<td><code>HHMMSS{CR}HHMMSS{CR}HHMMSS{CR}</code> 3 times on second</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>4DATE{CR}</code></td>
<td><code>YYYYMMDD{CR}</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>LEAPSEC{CR}</code></td>
<td><code>{SP}0{CR} | +1{CR} | -1{CR}</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>BYE{CR}</code></td>
<td>Sayounara messages</td>
</tr>
</tbody>
</table>
<p>The date and time are requested separately. The time is requested before and after the date request to check uncertainty of the date whether it&rsquo;s before or after midnight.</p>
<p>The leap second is not handled, and only written in the clockstats file as an information.</p>
<p>The JJY is the radio station which transmits the JST (Japan Standard Time) in long wave radio. The station JJY is operated by the National Institute of Information and Communications Technology. An operating announcement and some information are available from <a href="http://www.nict.go.jp/">http://www.nict.go.jp/</a> (English and Japanese) and <a href="http://jjy.nict.go.jp/">http://jjy.nict.go.jp/</a> (English and Japanese).</p>
<p>The user is expected to provide a symbolic link to an available serial port device. This is typically performed by a command such as:</p>
<p><code>ln -s /dev/ttyS0 /dev/jjy0</code></p>
<p>Using an RS-232C to USB converter cable, the clock or a modem can be connected to a USB port instead of a serial port. In this case, the typical symbolic link command is as follows;</p>
<p><code>ln -s /dev/ttyUSB0 /dev/jjy0</code></p>
<p>Windows NT does not support symbolic links to device files. COM_X_: is the unit used by the driver, based on the refclock unit number, where unit 1 corresponds to COM1: and unit 3 corresponds to COM3.</p>
<hr>
<h4 id="monitor-data">Monitor Data</h4>
<p>The driver writes sent and received data to/from the JJY receivers, GPS clock, and the modem into the <code>clockstats</code> file.</p>
<p><code>statsdir /var/log/ntpd/   filegen clockstats file clockstats type day enable</code></p>
<p><strong>Mark of the clockstats record</strong></p>
<table>
<thead>
<tr>
<th>Data</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>JJY</td>
<td>Information message (This refclock starts or stops.)</td>
</tr>
<tr>
<td><code>--&gt;</code></td>
<td>Sent data</td>
</tr>
<tr>
<td><code>&lt;--</code></td>
<td>Received data</td>
</tr>
<tr>
<td><code>---</code></td>
<td>Information message</td>
</tr>
<tr>
<td><code>===</code></td>
<td>Information message (Start of each polling, and sync. time.)</td>
</tr>
<tr>
<td><code>-W-</code></td>
<td>Warning message</td>
</tr>
<tr>
<td><code>-X-</code></td>
<td>Error message</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="fudge-factors">Fudge Factors</h4>
<p><code>time1 _time_</code></p>
<p>Specifies the time offset calibration factor, in seconds and fraction, with default 0.0.</p>
<p><code>time2 _time_</code></p>
<p>Not used by this driver.</p>
<p><code>stratum _number_</code></p>
<p>Specifies the driver stratum, in decimal from 0 to 15, with default 0.</p>
<p><code>refid _string_</code></p>
<p>Specifies the driver reference identifier, an ASCII string from one to four characters, with default <code>JJY</code>.</p>
<p><code>flag1 0 | 1</code></p>
<p>See corresponding receiver.</p>
<p><code>flag2 0 | 1</code></p>
<p>See corresponding receiver.</p>
<p><code>flag3 0 | 1</code></p>
<p>See corresponding receiver.</p>
<p><code>flag4 0 | 1</code></p>
<p>See corresponding receiver.</p>
</dl>

	  
	  <style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn-primary mb-5 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn-primary mb-5 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it!</a>
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that.</a>
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

	  <br />
	
  </div>
</section>
<footer class="navbar site-footer fixed-bottom py-0">
  <ul class="mx-auto">
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Mailing lists" aria-label="Mailing lists">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://lists.ntp.org/listinfo">
        <i class="bi-envelope"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
        <i class="bi-twitter"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
        <i class="bi-linkedin"></i>
      </a>
    </li>
    
    <li class="navbar-text" data-toggle="tooltip" data-placement="top" title="Facebook" aria-label="Facebook">
      <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
        <i class="bi-facebook"></i>
      </a>
    </li>
    
    <li class="navbar-text">
      <p>&copy; 2021 <a class="navbar-text text-white" href="https://www.nwtime.org">Network Time Foundation</a></p>	
    </li>
  </ul>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>









<script src="/js/main.min.edda36f11310414202808e2ac1dd0640e32cfff39126d93bd3d8a899e091711f.js" integrity="sha256-7do28RMQQUICgI4qwd0GQOMs//ORJtk709iomeCRcR8=" crossorigin="anonymous"></script>



  </body>
</html>