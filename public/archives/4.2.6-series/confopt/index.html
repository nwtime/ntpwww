<!doctype html><html lang=en><head><meta charset=utf-8><meta name=ROBOTS content="INDEX, FOLLOW"><meta name=description content="from Pogo, Walt Kelly
The chicken is getting configuration advice.
Last update: 	25-Nov-2009 4:46

Table of Contents

Configuration Commands
Command â€¦"><meta property="og:title" content="Server Options"><meta property="og:description" content="from Pogo, Walt Kelly
The chicken is getting configuration advice.
Last update: 25-Nov-2009 4:46
 Table of Contents  Configuration Commands Command Options Auxiliary Commands Bugs   Following is a description of the configuration commands in NTPv4. There are two classes of commands, configuration commands that configure an association with a remote server, peer or reference clock, and auxilliary commands that specify environmental variables that control various related operations."><meta property="og:type" content="article"><meta property="og:url" content="https://test.doc.ntp.org/archives/4.2.6-series/confopt/"><meta property="article:section" content="archives"><meta property="og:site_name" content="NTP: Network Time Protocol"><title>Server Options</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=generator content="Hugo 0.83.1"><link rel=stylesheet href=https://necolas.github.io/normalize.css/latest/normalize.css><link rel=stylesheet href=https://test.doc.ntp.org/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://test.doc.ntp.org/scss/nwtime.min.css media=screen><link rel="shortcut icon" href=https://test.doc.ntp.org/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=https://test.doc.ntp.org/favicons/apple-touch-icon.png sizes=180x180><link rel=icon type=image/png href=https://test.doc.ntp.org/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://test.doc.ntp.org/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://test.doc.ntp.org/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://test.doc.ntp.org/favicons/android-chrome-512x512.png sizes=512x512></head><body><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css><header class="sticky-top navigation"><div class=container><nav class="navbar navbar-expand-lg navbar-light py-0"><div class="d-flex align-items-center" style=height:80px;width:80px><a class="py-0 mx-1" href=https://www.nwtime.org><img class=img-fluid src=https://test.doc.ntp.org/images/logo.png alt></a></div><div class="d-flex align-items-center" style=height:80px;width:80px><a class="navbar-brand py-0 mx-1" href=https://test.doc.ntp.org/><img class=img-fluid src=https://test.doc.ntp.org/images/ntp_logo.jpg alt="NTP: Network Time Protocol"></a></div><button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class=bi-plus></i></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto py-0"><li class="nav-item py-0"><a class="nav-link py-0" style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/></a></li><li class="nav-item dropdown py-0"><a class="nav-link dropdown-toggle py-0" style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Support</a><div class=dropdown-menu><a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://support.ntp.org/>Support Wiki</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://support.ntp.org/bin/view/Servers/WebHome>Time Servers</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/support/securitynotice>Security</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/ntpfaq>FAQ</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://support.ntp.org/bin/view/Dev/WebHome>Developer Resources</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/contributorslist>Contributors List</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/contact>Contacts</a></div></li><li class="nav-item dropdown py-0"><a class="nav-link dropdown-toggle py-0" style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Reference Library</a><div class=dropdown-menu><a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/brief>Briefs</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/memos>Memos</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/reports>Reports</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/rfc>RFCs</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/software>Software</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/reflib/papers>White Papers</a></div></li><li class="nav-item dropdown py-0"><a class="nav-link dropdown-toggle py-0" style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Documentation</a><div class=dropdown-menu><a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.2.8-series>4.2.8-series</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.2.6-series>4.2.6-series</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.2.4-series>4.2.4-series</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.2.2-series>4.2.2-series</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.2.0>4.2.0</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.1.2>4.1.2</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.1.1>4.1.1</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/4.1.0>4.1.0</a>
<a class=dropdown-item style="text-decoration:none;font-size:16px;font-family:nunito sans,sans-serif" href=https://test.doc.ntp.org/archives/3-5.93e>3-5.93e</a></div></li></ul></div><script async src="https://cse.google.com/cse.js?cx=bb3c9b3e375d856be"></script><div class=gcse-search></div></nav></div><div class=header-border></div></header><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://test.doc.ntp.org/documentation/>Documentation</a></li><li class=breadcrumb-item><a href=https://test.doc.ntp.org/archives/4.2.6-series/>4.2.6-series</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://test.doc.ntp.org/archives/4.2.6-series/confopt/>Server Options</a></li></ol></nav><section class="section pt-0 pb-auto"><div class=container><h1>Server Options</h1><p><img src=/archives/pic/boom3a.gif alt=gif><a href=/reflib/pictures/>from <em>Pogo</em>, Walt Kelly</a></p><p>The chicken is getting configuration advice.</p><p>Last update: 25-Nov-2009 4:46</p><hr><h4 id=table-of-contents>Table of Contents</h4><ul><li><a href=/archives/4.2.6-series/confopt/#configuration-commands>Configuration Commands</a></li><li><a href=/archives/4.2.6-series/confopt/#command-options>Command Options</a></li><li><a href=/archives/4.2.6-series/confopt/#auxiliary-commands>Auxiliary Commands</a></li><li><a href=/archives/4.2.6-series/confopt/#bugs>Bugs</a></li></ul><hr><p>Following is a description of the configuration commands in NTPv4. There are two classes of commands, configuration commands that configure an association with a remote server, peer or reference clock, and auxilliary commands that specify environmental variables that control various related operations.</p><p>The various modes described on the <a href=/archives/4.2.6-series/assoc/>Association Management</a> page are determined by the command keyword and the DNS name or IP address. Addresses are classed by type as (s) a remote server or peer (IPv4 class A, B and C), (b) the IP broadcast address of a local interface, (m) a multicast address (IPv4 class D), or (r) a reference clock address (127.127.x.x). For type m addresses the IANA has assigned the multicast group address IPv4 224.0.1.1 and IPv6 ff05::101 (site local) exclusively to NTP, but other nonconflicting addresses can be used.</p><p>If the Basic Socket Interface Extensions for IPv6 (RFC-2553) is detected, support for the IPv6 address family is generated in addition to the default IPv4 address family. IPv6 addresses can be identified by the presence of colons <code>:</code> in the address field. IPv6 addresses can be used almost everywhere where IPv4 addresses can be used, with the exception of reference clock addresses, which are always IPv4. Note that in contexts where a host name is expected, a <code>4</code> qualifier preceding the host name forces DNS resolution to the IPv4 namespace, while a <code>-6</code> qualifier forces DNS resolution to the IPv6 namespace.</p><hr><h4 id=configuration-commands>Configuration Commands</h4><p>These commands specify the time server name or address to be used and the mode in which to operate. The address can be either a DNS name or a IPv4 or IPv6 address in standard notation. In general, multiple commands of each type can be used for different server and peer addresses or multicast groups.</p><dl><dt><code><strong>server <em>address</em> [options &mldr;]</strong></code></dt><dd><p>For type s and r addresses (only), this command mobilizes a persistent client mode association with the specified remote server or local reference clock. If the <code>preempt</code> flag is specified, a preemptable client mode association is mobilized instead.</p></dd><dt><code><strong>peer <em>address</em> [options &mldr;]</strong></code></dt><dd><p>For type s addresses (only), this command mobilizes a persistent symmetric-active mode association with the specified remote peer.</p></dd><dt><code><strong>broadcast <em>address</em> [options &mldr;]</strong></code></dt><dd><p>For type b and m addressees (only), this command mobilizes a persistent broadcast or multicast server mode association. Note that type b messages go only to the interface specified, but type m messages go to all interfaces.</p></dd><dt><code><strong>manycastclient <em>address</em> [options &mldr;]</strong></code></dt><dd><p>For type m addresses (only), this command mobilizes a manycast client mode association for the multicast group address specified. In this mode the address must match the address specified on the <code>manycastserver</code> command of one or more designated manycast servers.</p></dd><dt><code><strong>pool <em>address</em> [options &mldr;]</strong></code></dt><dd><p>For type s messages (only) this command mobilizes a client mode association for servers implementing the pool automatic server discovery scheme described on the <a href=/archives/4.2.6-series/assoc/>Association Management</a> page. The address is a DNS name in the form <code><em>area</em>.pool.ntp.org</code>, where <code><em>area</em></code> is a qualifier designating the server geographic area such as <code>us</code> or <code>europe</code>.</p></dd><dt><code><strong>unpeer [<em>address</em> | <em>associd</em>]</strong></code></dt><dd><p>This command removes a previously configured association. An address or association ID can be used to identify the association. Either an IP address or DNS name can be used. This command is most useful when supplied via <code><a href=/archives/4.2.6-series/ntpq/>ntpq</a></code> runtime configuration commands <code>:config</code> and <code>config-from-file</code>.</p></dd></dl><hr><h4 id=command-options>Command Options</h4><dl><dt><code><strong>autokey</strong></code></dt><dd><p>Send and receive packets authenticated by the Autokey scheme described in the <a href=/archives/4.2.6-series/authopt/>Authentication Options</a> page. This option is mutually exclusive with the <code>key</code> option.</p></dd><dt><code><strong>burst</strong></code></dt><dd><p>When the server is reachable, send a burst of eight packets instead of the usual one. The packet spacing is normally 2 s; however, the spacing between the first and second packets can be changed with the <code>calldelay</code> command to allow additional time for a modem or ISDN call to complete. This option is valid only with the <code>server</code> command and type s addressesa. It is a recommended option when the <code>maxpoll</code> option is greater than 10 (1024 s).</p></dd><dt><code><strong>iburst</strong></code></dt><dd><p>When the server is unreachable, send a burst of eight packets instead of the usual one. The packet spacing is normally 2 s; however, the spacing between the first and second packets can be changed with the <code>calldelay</code> command to allow additional time for a modem or ISDN call to complete. This option is valid only with the <code>server</code> command and type s addresses. It is a recommended option with this command.</p></dd><dt><code><strong>key <em>key</em></strong></code></dt><dd><p>Send and receive packets authenticated by the symmetric key scheme described in the <a href=/archives/4.2.6-series/authopt/>Authentication Options</a> page. The <em><code>key</code></em> specifies the key identifier with values from 1 to 65534, inclusive. This option is mutually exclusive with the <code>autokey</code> option.</p></dd><dt><code><strong>minpoll _minpoll</strong></code></dt><dd><code><strong>maxpoll <em>maxpoll</em></strong></code></dd><dd><p>These options specify the minimum and maximum poll intervals for NTP messages, in seconds as a power of two. The maximum poll interval defaults to 10 (1024 s), but can be increased by the <code>maxpoll</code> option to an upper limit of 17 (36 h). The minimum poll interval defaults to 6 (64 s), but can be decreased by the <code>minpoll</code> option to a lower limit of 3 (8 s).</p></dd><dt><code><strong>mode <em>option</em></strong></code></dt><dd><p>Pass the <code><em>option</em></code> to a reference clock driver, where <code><em>option</em></code> is an integer in the range from 0 to 255, inclusive. This option is valid only with type r addresses.</p></dd><dt><code><strong>noselect</strong></code></dt><dd><p>Marks the server or peer to be ignored by the selection algorithm but visible to the monitoring program. This option is ignored with the <code>broadcast</code> command.</p></dd><dt><code><strong>preempt</strong></code></dt><dd><p>Specifies the association as preemptable rather than the default persistent. This option is ignored with the <code>broadcast</code> command and is most useful with the <code>manycastclient</code> and <code>pool</code> commands.</p></dd><dt><code><strong>prefer</strong></code></dt><dd><p>Mark the server as preferred. All other things being equal, this host will be chosen for synchronization among a set of correctly operating hosts. See the <a href=/archives/4.2.6-series/prefer/>Mitigation Rules and the <code>prefer</code> Keyword</a> page for further information. This option is valid only with the <code>server</code> and <code>peer</code> commands.</p></dd><dt><code><strong>true</strong></code></dt><dd><p>Mark the association to assume truechimer status; that is, always survive the selection and clustering algorithms. This option can be used with any association, but is most useful for reference clocks with large jitter on the serial port and precision pulse-per-second (PPS) signals. Caution: this option defeats the algorithms designed to cast out falsetickers and can allow these sources to set the system clock. This option is valid only with the <code>server</code> and <code>peer</code> commands.</p></dd><dt><code><strong>ttl <em>ttl</em></strong></code></dt><dd><p>This option specifies the time-to-live <em><code>ttl</code></em> for the <code>broadcast</code> command and the maximum <em><code>ttl</code></em> for the expanding ring search used by the <code>manycastclient</code> command. Selection of the proper value, which defaults to 127, is something of a black art and should be coordinated with the network administrator. This option is invalid with type r addresses.</p></dd><dt><code><strong>version <em>version</em></strong></code></dt><dd><p>Specifies the version number to be used f or outgoing NTP packets. Versions 1-4 are the choices, with version 4 the default.</p></dd><dt><code><strong>xleave</strong></code></dt><dd><p>Operate in interleaved mode (symmetric and broadcast modes only). (see <a href=/archives/4.2.6-series/xleave/>NTP Interleaved Modes</a>)</p></dd></dl><hr><h4 id=auxiliary-commands>Auxiliary Commands</h4><dl><dt><code><strong>broadcastclient</strong></code></dt><dd><p>Enable reception of broadcast server messages to any local interface (type b address). Ordinarily, upon receiving a broadcast message for the first time, the broadcast client measures the nominal server propagation delay using a brief client/server exchange, after which it continues in listen-only mode. If a nonzero value is specified in the <code>broadcastdelay</code> command, the value becomes the delay and the volley is not executed. Note: the <code>novolley</code> option has been deprecated for future enhancements. Note that, in order to avoid accidental or malicious disruption in this mode, both the server and client should operate using symmetric key or public key authentication as described in the <a href=/archives/4.2.6-series/authopt/>Authentication Options</a> page. Note that the <code>novolley</code> keyword is incompatible with public key authentication.</p></dd><dt><code><strong>manycastserver <em>address</em> [&mldr;]</strong></code></dt><dd><p>Enable reception of manycast client messages (type m)to the multicast group address(es) (type m) specified. At least one address is required. Note that, in order to avoid accidental or malicious disruption, both the server and client should operate using symmetric key or public key authentication as described in the <a href=/archives/4.2.6-series/authopt/>Authentication Options</a> page.</p></dd><dt><code><strong>multicastclient <em>address</em> [&mldr;]</strong></code></dt><dd><p>Enable reception of multicast server messages to the multicast group address(es) (type m) specified. Upon receiving a message for the first time, the multicast client measures the nominal server propagation delay using a brief client/server exchange with the server, then enters the broadcast client mode, in which it synchronizes to succeeding multicast messages. Note that, in order to avoid accidental or malicious disruption in this mode, both the server and client should operate using symmetric key or public key authentication as described in the <a href=/archives/4.2.6-series/authopt/>Authentication Options</a> page.</p></dd></dl><hr><h4 id=bugs>Bugs</h4><p>The syntax checking is not picky; some combinations of ridiculous and even hilarious options and modes may not be detected.</p></div></section><footer class="navbar site-footer fixed-bottom py-0"><ul class=mx-auto><li class=navbar-text data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/ntp><i class=bi-twitter></i></a></li><li class=navbar-text data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/groups/4651343><i class=bi-linkedin></i></a></li><li class=navbar-text data-toggle=tooltip data-placement=top title=Facebook aria-label=Facebook><a class=text-white target=_blank rel="noopener noreferrer" href=https://www.facebook.com/networktimeprotocol><i class=bi-facebook></i></a></li><li class=navbar-text><p>&copy; 2022 <a class="navbar-text text-white" href=https://www.nwtime.org>Network Time Foundation</a></p></li></ul></footer></body></html>