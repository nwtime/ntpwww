<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.84.1" /><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>PPS Clock Discipline | NTP: Network Time Protocol</title>
<meta name="description" content="NTP Documentation Archive"><meta property="og:title" content="PPS Clock Discipline" />
<meta property="og:description" content="Table of Contents  Synopsis Description Fudge Factors Additional Information   Synopsis Address: 127.127.22.u
Reference ID: ATOM
Driver ID: ATOM-PPS
Serial Port: /dev/pps_u_; 9600 baud, 8-bits, no parity
Features: tty_clk, ppsclock
 Description This driver furnishes an interface for pulse-per-second (PPS) signals produced by a cesium clock, radio clock or related equipment. It can be used to remove accumulated jitter and retime a secondary server when synchronized to a primary server over a congested, wide-area network and before redistributing the time to local clients." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/archives/3-5.93e/driver22/" /><meta property="article:section" content="archives" />

<meta property="og:site_name" content="NTP: Network Time Protocol" />

<meta itemprop="name" content="PPS Clock Discipline">
<meta itemprop="description" content="Table of Contents  Synopsis Description Fudge Factors Additional Information   Synopsis Address: 127.127.22.u
Reference ID: ATOM
Driver ID: ATOM-PPS
Serial Port: /dev/pps_u_; 9600 baud, 8-bits, no parity
Features: tty_clk, ppsclock
 Description This driver furnishes an interface for pulse-per-second (PPS) signals produced by a cesium clock, radio clock or related equipment. It can be used to remove accumulated jitter and retime a secondary server when synchronized to a primary server over a congested, wide-area network and before redistributing the time to local clients.">

<meta itemprop="wordCount" content="615">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="PPS Clock Discipline"/>
<meta name="twitter:description" content="Table of Contents  Synopsis Description Fudge Factors Additional Information   Synopsis Address: 127.127.22.u
Reference ID: ATOM
Driver ID: ATOM-PPS
Serial Port: /dev/pps_u_; 9600 baud, 8-bits, no parity
Features: tty_clk, ppsclock
 Description This driver furnishes an interface for pulse-per-second (PPS) signals produced by a cesium clock, radio clock or related equipment. It can be used to remove accumulated jitter and retime a secondary server when synchronized to a primary server over a congested, wide-area network and before redistributing the time to local clients."/>




<link rel="preload" href="/scss/main.min.c7590aab2525bc59dfb1dc16e6ad51978d04d1687ab16e19453b88b4ff42ceea.css" as="style">
<link href="/scss/main.min.c7590aab2525bc59dfb1dc16e6ad51978d04d1687ab16e19453b88b4ff42ceea.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>





  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">NTP: Network Time Protocol</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://www.nwtime.org" target="_blank" ><span>Network Time Foundation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/reflib/" ><span>Reference Library</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Docs
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/archives/4.2.8-series/toc">4.2.8-series</a>
	
	<a class="dropdown-item" href="/archives/4.2.6-series/toc">4.2.6-series</a>
	
	<a class="dropdown-item" href="/archives/4.2.4-series/toc">4.2.4-series</a>
	
	<a class="dropdown-item" href="/archives/4.2.2-series/toc">4.2.2-series</a>
	
	<a class="dropdown-item" href="/archives/4.2.0/toc">4.2.0</a>
	
	<a class="dropdown-item" href="/archives/4.1.2/toc">4.1.2</a>
	
	<a class="dropdown-item" href="/archives/4.1.1/toc">4.1.1</a>
	
	<a class="dropdown-item" href="/archives/4.1.0/toc">4.1.0</a>
	
	<a class="dropdown-item" href="/archives/3-5.93e/toc">3-5.93e</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="/archives/">Docs</a>
</li>




<li class="breadcrumb-item" >
	<a href="/archives/3-5.93e/">3-5.93e</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/archives/3-5.93e/driver22/">PPS Clock Discipline</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>PPS Clock Discipline</h1>
    
	       
	<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><a href="/archives/3-5.93e/driver22/#synopsis">Synopsis</a></li>
<li><a href="/archives/3-5.93e/driver22/#description">Description</a></li>
<li><a href="/archives/3-5.93e/driver22/#fudge-factors">Fudge Factors</a></li>
<li><a href="/archives/3-5.93e/driver22/#additional-information">Additional Information</a></li>
</ul>
<hr>
<h4 id="synopsis">Synopsis</h4>
<p>Address: 127.127.22.<em>u</em><br>
Reference ID: <tt>ATOM</tt><br>
Driver ID: <tt>ATOM-PPS</tt><br>
Serial Port: <tt>/dev/pps_u_</tt>; 9600 baud, 8-bits, no parity<br>
Features: <tt>tty_clk</tt>, <tt>ppsclock</tt></p>
<hr>
<h4 id="description">Description</h4>
<p>This driver furnishes an interface for pulse-per-second (PPS) signals produced by a cesium clock, radio clock or related equipment. It can be used to remove accumulated jitter and retime a secondary server when synchronized to a primary server over a congested, wide-area network and before redistributing the time to local clients.</p>
<p>In order for this driver to work, the local clock must be set to within +-500 ms by another means, such as a radio clock or NTP itself. The PPS signal is connected via a serial port and <a href="/archives/3-5.93e/gadget">gadget box</a> consisting of a one-shot and RS232 level converter. When operated at 38.4 kbps with a SPARCstation IPC, this arrangement has a worst-case jitter less than 26 us.</p>
<p>There are three ways in which this driver can be used. The first way uses the <tt>LDISC_CLKPPS</tt> line discipline and works only for the baseboard serial ports of the Sun SPARCstation running SunOS 4.x. In order to use this option, the -DPPS flag must be included in the <tt>DEFS_LOCAL</tt> line of the distribution configuration file <tt>./Config.local</tt>. The PPS signal is connected via the gadget box to the carrier detect (DCD) line of a serial port. The signal is activated by a <tt>fudge flag3 1</tt> command following the <tt>server</tt> command in the configuration file. This causes the <tt>ppsclock</tt> streams module to be configured for that port and to capture a timestamp at the on-time transition of the PPS signal. This driver then reads the timestamp directly by a designated <tt>ioctl()</tt> system call. This provides the most accurate time and least jitter of any other scheme. There is no need to configure a dedicated device for this purpose, which ordinarily is the device used for the associated radio clock.</p>
<p>The second way uses the <tt>LDISC_CLKPPS</tt> line discipline and works for any architecture supporting a serial port. In order to use this option, the -DCLK flag must be included in the <tt>DEFS_LOCAL</tt> line of the distribution configuration file <tt>./Config.local</tt>. If after a few seconds this driver finds no <tt>ppsclock</tt> module configured, it attempts to open a serial port device <tt>/dev/pps%d</tt>, where <tt>%d</tt> is the unit number, and assign the LDISC_CLKPPS line discipline to it. If the line discipline fails, no harm is done except the accuracy is reduced somewhat. The pulse generator in the gadget box must be adjusted to produce a start bit of length 26 usec at 38400 bps. Used with the <tt>LDISC_CLKPPS</tt> line discipline, this produces an ASCII DEL character (<code>\377</code>) followed by a timestamp at the on-time transition of the PPS signal.</p>
<p>The third way involves an auxiliary radio clock driver which calls the PPS driver with a timestamp captured by that driver. This use is documented in the source code for the driver(s) involved.</p>
<hr>
<h4 id="fudge-factors">Fudge Factors</h4>
<dt><tt>time1 _time_</tt></dt>
<p>Specifies the time offset calibration factor, in seconds and fraction, with default 0.0. This parameter can be used to compensate for the UART and OS delays. Allow about 247 us for UART delays at 38400 bps and about 1 ms for SunOS streams nonsense.</p>
<dt><tt>time2 _time_</tt></dt>
<p>Not used by this driver.</p>
<dt><tt>stratum _number_</tt></dt>
<p>Specifies the driver stratum, in decimal from 0 to 15, with default 0.</p>
<dt><tt>refid _string_</tt></dt>
<p>Specifies the driver reference identifier, an ASCII string from one to four characters, with default <tt>ATOM</tt>.</p>
<dt><tt>flag1 0 | 1</tt></dt>
<p>Not used by this driver.</p>
<dt><tt>flag2 0 | 1</tt></dt>
<p>Not used by this driver.</p>
<dt><tt>flag3 0 | 1</tt></dt>
<p>Enables <tt>ppsclock</tt> line discipline/streams module if set.</p>
<dt><tt>flag4 0 | 1</tt></dt>
<p>Not used by this driver.</p>
<hr>
<h4 id="additional-information">Additional Information</h4>
<p><a href="/archives/3-5.93e/refclock">Reference Clock Drivers</a></p>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it!</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that.</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
</div>


          </main>
        </div>
      </div>
      <link href="/assets/scss/_variables_project.css" rel="stylesheet">

<footer class="navbar site-footer fixed-bottom py-0">
      <div>
        
        
        
<ul class="list-inline">
  
  <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Mailing lists" aria-label="Mailing lists">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://lists.ntp.org/listinfo">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
      <i class="fab fa-linkedin-in"></i>
    </a>
  </li>
  
  <li class="list-inline-item" data-toggle="tooltip" data-placement="top" title="Facebook" aria-label="Facebook">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
      <i class="fab fa-facebook-f"></i>
    </a>
  </li>
  
</ul>

        
        
		</div>
		<div>
        <p style="font-size: 12px; font-family: 'Nunito Sans', sans-serif;">&copy; 2021 <a class="text-white" href="https://www.nwtime.org">Network Time Foundation</a></p>	
    </div>
	</div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/js/main.min.5c74b870c6953931a705f390a49c7e4c0a842ec5c83b24354758dd674343ed0d.js" integrity="sha256-XHS4cMaVOTGnBfOQpJx&#43;TAqELsXIOyQ1R1jdZ0ND7Q0=" crossorigin="anonymous"></script>




  </body>
</html>