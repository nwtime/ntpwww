<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW"><link rel="canonical" href="https://doc.ntp.org/documentation/4.2.8-series/kernpps/" />
  
  <meta property="og:title" content="PPSAPI Interface for Precision Time Signals" />
<meta property="og:description" content="from NBS Special Publication 432, 1979 (out of print)
 Table of Contents  Introduction PPSAPI Application Program Interface   Introduction RFC 2783 describes the PPSAPI application programming interface for external precision time signals, such as the pulse-per-second (PPS) signal generated by some radio clocks and cesium oscillators. The PPSAPI provides a generic capability in the ubiquitous Unix kernel which can be used for a wide variety of measurement applications, including network time synchronization and related experiments." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://doc.ntp.org/documentation/4.2.8-series/kernpps/" /><meta property="og:image" content="https://doc.ntp.org/images/sundial.jpg"/><meta property="article:section" content="documentation" />

<meta property="article:modified_time" content="2022-05-04T17:05:38&#43;01:00" /><meta property="og:site_name" content="NTP: Network Time Protocol" />




<script async src="https://www.googletagmanager.com/gtag/js?id=G-BN61ZTDHBP"></script>
<script>
var doNotTrack = true;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BN61ZTDHBP', { 'anonymize_ip': true });
}
</script>



<script>
<!-- Use custom placeholder for search -->
window.onload = demo;
function demo() {
    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search...")
}
</script>


  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel="stylesheet"/>
   
  <title>PPSAPI Interface for Precision Time Signals</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The NTP Project conducts Research and Development in NTP, a protocol designed to synchronize the clocks of computers over a network to a common timebase.">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://doc.ntp.org/scss/nwtime.min.628523c03b8d13d316307f90d6bec3f6.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://doc.ntp.org/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://doc.ntp.org/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://doc.ntp.org/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://doc.ntp.org/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://doc.ntp.org/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://doc.ntp.org/favicons/android-chrome-512x512.png" sizes="512x512"></head>
<body><!-- navigation -->

<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">


	<div>
	  <a class="navbar-brand" href="https://www.nwtime.org"><img height="80" width="80" src="https://doc.ntp.org/images/logo.png" alt=""></a>
	  <a class="navbar-brand" href="https://doc.ntp.org/"><img height="80" width="80" src="https://doc.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
    </div>


    <div>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://doc.ntp.org/support/">Support</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://doc.ntp.org/reflib/">Reference Library</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://doc.ntp.org/documentation/">Documentation</a>
        </button>
      
    </div>



<script async src="https://cse.google.com/cse.js?cx=bb3c9b3e375d856be"></script>
  <div class="gcse-search">
  </div>

</nav>


  <div class="header-border">
  </div>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://doc.ntp.org/documentation/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://doc.ntp.org/documentation/4.2.8-series/">4.2.8-series</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://doc.ntp.org/documentation/4.2.8-series/kernpps/">PPSAPI Interface for Precision Time Signals</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>PPSAPI Interface for Precision Time Signals</h1>
     
    <p style="font-size: small; color: grey;">Last update: May 4, 2022 17:05 UTC (<a href="https://bitbucket.nwtime.org/projects/WEBSITES/repos/ntpwww/commits/dbea9b7d4daf047a65cdfd64d621e7efa23484da">dbea9b7d4</a>)</p>
	<p><p>
  <img loading="lazy" src="https://doc.ntp.org/documentation/pic/tonea.gif" alt="gif"  />
</p><a href="https://doc.ntp.org/reflib/pictures/">from <em>NBS Special Publication 432, 1979</em></a> (out of print)</p>
<hr>
<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><a href="https://doc.ntp.org/documentation/4.2.8-series/kernpps/#introduction">Introduction</a></li>
<li><a href="https://doc.ntp.org/documentation/4.2.8-series/kernpps/#ppsapi-application-program-interface">PPSAPI Application Program Interface</a></li>
</ul>
<hr>
<h4 id="introduction">Introduction</h4>
<p><a href="https://doc.ntp.org/reflib/rfc/rfc2783.txt">RFC 2783</a> describes the PPSAPI application programming interface for external precision time signals, such as the pulse-per-second (PPS) signal generated by some radio clocks and cesium oscillators. The PPSAPI provides a generic capability in the ubiquitous Unix kernel which can be used for a wide variety of measurement applications, including network time synchronization and related experiments. The hardware to do this requires only a serial port and a modem control lead, such as the data carrier detect (DCD) lead, which can be driven by an external source via a level converter/pulse generator such as described on the <a href="https://doc.ntp.org/documentation/4.2.8-series/pps/">Pulse-per-second (PPS) Signal Interfacing</a> page. In some systems a parallel port can be used for the same purpose.</p>
<p>The PPSAPI interface defined in RFC 2783 is the only PPS interface supported in NTP Version 4. The PPSAPI is supported in stock FreeBSD and, with the addition of the <code>PPSkit</code> kernel module, in Linux.</p>
<p>The special header file <code>/usr/include/sys/timepps.h</code> implements the PPSAPI using whatever primitives are available in each archeticture and operating system. It obsoletes previous APIs based on the <code>tty_clock</code> and <code>ppsclock</code> line disciplines and streams modules, which are no longer supported.</p>
<p>The <a href="https://doc.ntp.org/documentation/drivers/driver22/">PPS Clock Discipline</a> driver (type 22) uses the PPSAPI in conjunction with a local radio clock or remote NTP server as a reference clock. The driver can also use the PPSAPI as an interface directly to the kernel PPS facility as described on the <a href="https://doc.ntp.org/documentation/4.2.8-series/kern/">Kernel Model for Precision Timekeeping</a> page.</p>
<hr>
<h4 id="ppsapi-application-program-interface">PPSAPI Application Program Interface</h4>
<p>The PPSAPI interface provides the following functions:</p>
<dl>
<dt><code><strong>time_pps_create</strong></code></dt>
<dd>
<p>Creates a PPS interface instance and returns a handle to it.</p>
</dd>
<dt><code><strong>time_pps_destroy</strong></code></dt>
<dd>
<p>Destroys a PPS interface and returns the resources used.</p>
</dd>
<dt><code><strong>time_pps_setparams</strong></code></dt>
<dd>
<p>Sets the parameters associated with a PPS interface instance, including offsets to be automatically added to captured timestamps.</p>
</dd>
<dt><code><strong>time_pps_getparams</strong></code></dt>
<dd>
<p>Returns the parameters associated with a PPS interface instance.</p>
</dd>
<dt><code><strong>time_pps_getcap</strong></code></dt>
<dd>
<p>Returns the capabilities of the current interface and kernel implementation.</p>
</dd>
<dt><code><strong>time_pps_fetch</strong></code></dt>
<dd>
<p>Returns the current timestamps associated with a PPS interface instance in either nanoseconds and nanoseconds (Unix <code>timespec</code>) or seconds and fraction (NTP) format.</p>
</dd>
<dt><code><strong>time_pps_kcbind</strong></code></dt>
<dd>
<p>If kernel PPS processing is supported, this binds the support to the associated PPS interface instance.</p>
</dd>
</dl>
<p>The entire PPS interface functionality is currently provided by inline code in the <code>timepps.h</code> header file. While not all implementations support the full PPSAPI specification, they do support all the functions required for the PPS driver described next. The FreeBSD, Linux and Solaris implementations can be used with the stock kernels provided with those systems; however, the Tru64 and SunOS kernels require additional functions not provided in the stock kernels. Solaris users are cautioned that these functions operate improperly in Solaris versions prior to 2.8 with patch Generic_108528-02. Header files for other systems can be found at <a href="https://doc.ntp.org/reflib/software/nanokernel.tar.gz">nanokernel.tar.gz</a>.</p>

	  
  </div>
</section>
<nav class="site-footer navbar navbar-expand-sm mt-auto">
  <div class="container">
      <ul class="navbar-nav">
        
        <li class="nav-item" title="Twitter" aria-label="Twitter">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
          <img src="https://doc.ntp.org/images/icons/twitter.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="LinkedIn" aria-label="LinkedIn">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
          <img src="https://doc.ntp.org/images/icons/linkedin.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="Facebook" aria-label="Facebook">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
          <img src="https://doc.ntp.org/images/icons/facebook.svg" width="20" height="20"></img>
          </a>
       </li>
       
	  </ul>
	  <ul class="mx-auto pt-3">
        <p>&copy; 2022 <a class="navbar-text text-white" href="https://www.nwtime.org/">Network Time Foundation</a></p>	
      </ul>
    </div>
</nav>
</body>
</html>