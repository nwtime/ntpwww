<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8"><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<link rel="canonical" href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/" />
  
  <meta property="og:title" content="Undisciplined Local Clock" />
<meta property="og:description" content="Table of Contents  Synopsis Description Monitor Data Fudge Factors Additional Information   Synopsis  Address: 127.127.1.u Reference ID: LCL Driver ID: LOCAL   Description This is a hack to allow a machine to use its own system clock as a reference clock, i.e., to free-run using no outside clock discipline source. This is useful if NTP is to be used in an isolated environment with no radio clock or NIST modem available." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://test.doc.ntp.org/documentation/3-5.93e/driver1/" /><meta property="og:image" content="https://test.doc.ntp.org/images/sundial.jpg"/><meta property="article:section" content="documentation" />

<meta property="article:modified_time" content="2022-04-14T17:54:34&#43;01:00" /><meta property="og:site_name" content="NTP: Network Time Protocol" />







  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel="stylesheet"/>
   
  <title>Undisciplined Local Clock</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The NTP Project conducts Research and Development in NTP, a protocol designed to synchronize the clocks of computers over a network to a common timebase.">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://test.doc.ntp.org/scss/nwtime.min.628523c03b8d13d316307f90d6bec3f6.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://test.doc.ntp.org/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://test.doc.ntp.org/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/android-chrome-512x512.png" sizes="512x512"></head>
<body><!-- navigation -->

<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">


	<div>
	  <a class="navbar-brand" href="https://www.nwtime.org"><img height="80" width="80" src="https://test.doc.ntp.org/images/logo.png" alt=""></a>
	  <a class="navbar-brand" href="https://test.doc.ntp.org/"><img height="80" width="80" src="https://test.doc.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
    </div>


    <div>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/support/">Support</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/reflib/">Reference Library</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/documentation/">Documentation</a>
        </button>
      
    </div>



</nav>


  <div class="header-border">
  </div>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://test.doc.ntp.org/documentation/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://test.doc.ntp.org/documentation/3-5.93e/">3-5.93e</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/">Undisciplined Local Clock</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>Undisciplined Local Clock</h1>
     
    <p style="font-size: small; color: grey;">Last update: April 14, 2022 17:54 UTC (<a href="https://bitbucket.nwtime.org/projects/WEBSITES/repos/ntpwww/commits/74f2bb37e81508678aace5de294d77ddd4993bb6">74f2bb37e</a>)</p>
	<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/#synopsis">Synopsis</a></li>
<li><a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/#description">Description</a></li>
<li><a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/#monitor-data">Monitor Data</a></li>
<li><a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/#fudge-factors">Fudge Factors</a></li>
<li><a href="https://test.doc.ntp.org/documentation/3-5.93e/driver1/#additional-information">Additional Information</a></li>
</ul>
<hr>
<h4 id="synopsis">Synopsis</h4>
<dl>
<dt><strong>Address:</strong> <code>127.127.1.<em>u</em></code></dt>
<dd><strong>Reference ID:</strong> <code>LCL</code></dd>
<dd><strong>Driver ID:</strong> <code>LOCAL</code></dd>
</dl>
<hr>
<h4 id="description">Description</h4>
<p>This is a hack to allow a machine to use its own system clock as a reference clock, i.e., to free-run using no outside clock discipline source. This is useful if NTP is to be used in an isolated environment with no radio clock or NIST modem available. Pick a machine that has a good clock oscillator (Digital machines are good, Sun machines are not) and configure it with this driver. Set the clock using the best means available, like eyeball-and-wristwatch. Then, point all the other machines at this one or use broadcast (not multicast) mode to distribute time.</p>
<p>Another application for this driver is if a particular server clock is to be used as the clock of last resort when all other normal synchronization sources have gone away. This is especially useful if that server has an ovenized oscillator. For this you would configure this driver at a stratum greater than any other likely sources of time (say 3 or 4) to prevent the server taking over when legitimate sources are still available.</p>
<p>A third application for this driver is when an external discipline source is available, such as the NIST <code>lockclock</code> program, which synchronizes the local clock via a telephone modem and the NIST Automated Computer Time Service (ACTS), or the Digital Time Synchronization Service (DTSS), which runs on DCE machines. In this case the stratum should be set at zero, indicating a bona fide stratum-1 source. Exercise some caution with this, since there is no easy way to telegraph via NTP that something might be wrong in the discipline source itself. In the case of DTSS, the local clock can have a rather large jitter, depending on the interval between corrections and the intrinsic frequency error of the clock oscillator. In extreme cases, this can cause clients to exceed the 128-ms slew window and drop off the NTP subnet. In the default mode the behavior of the clock selection algorithm is modified when this driver is in use. The algorithm is designed so that this driver will never be selected unless no other discipline source is available. This can be overridden with the <code>prefer</code> keyword of the <code>server</code> configuration command, in which case only this driver will be selected for synchronization and all other discipline sources will be ignored. This behavior is intended for use when an external discipline source controls the system clock. See the <a href="https://test.doc.ntp.org/documentation/3-5.93e/prefer/">Mitigation Rules and the prefer Keyword</a> page for a detailed description of the finicky behavior.</p>
<p>The stratum for this driver is set at 3 by default, but can be changed by the <code>fudge</code> configuration command and/or the <code>xntpdc</code> utility. The reference ID is LCL by default, but can be changed using the same mechanisms. <strong>NEVER</strong> configure this driver to operate at a stratum which might possibly disrupt a client with access to a bona fide primary server, unless the local clock oscillator is reliably disciplined by another source. <strong>NEVER NEVER</strong> configure a server which might devolve to an undisciplined local clock to use multicast mode.</p>
<p>This driver provides a mechanism to trim the local clock in both time and frequency, as well as a way to manipulate the leap bits. The <code>fudge time1</code> parameter adjusts the time (in seconds) and the <code>fudge time2</code> parameter adjusts the frequency (in parts per million). Both parameters are additive and operate only once; that is, each command (as from <code>xntpdc</code>) adds signed increments in time or frequency to the nominal local clock time and frequency. (Note: The frequency cannot be changed when the kernel modifications are in use - see the <a href="https://test.doc.ntp.org/documentation/3-5.93e/kern/">A Kernel Model for Precision Timekeeping</a> page.) The <code>fudge flag1</code> and <code>fudge flag2</code> flags set the corresponding leap bits; for example, setting only <code>flag1</code> causes a leap second to be inserted at the end of the UTC day and setting only <code>flag2</code> causes a leap second to be deleted at the end of the UTC day. Setting both flags causes the local clock driver to appear unsynchronized, which may be a blessing if a server violates the above rules, since <code>xntpdc</code> can turn the bugger off. These bits are not reset automatically when the leap takes place; they must be turned off manually after the leap event and before the next UTC day.</p>
<hr>
<h4 id="monitor-data">Monitor Data</h4>
<p>No <code>filegen clockstats</code> monitor data are produced by this driver.</p>
<hr>
<h4 id="fudge-factors">Fudge Factors</h4>
<dl>
<dt><code><strong>time1 <em>time</em></strong></code></dt>
<dd>
<p>Specifies the time offset calibration factor, in seconds and fraction, with default 0.0.</p>
</dd>
<dt><code><strong>time2 <em>time</em></strong></code></dt>
<dd>
<p>Specifies the frequency offset calibration factor, in parts per million, with default 0.0.</p>
</dd>
<dt><code><strong>stratum <em>number</em></strong></code></dt>
<dd>
<p>Specifies the driver stratum, in decimal from 0 to 15, with default 3.</p>
</dd>
<dt><code><strong>refid <em>string</em></strong></code></dt>
<dd>
<p>Specifies the driver reference identifier, an ASCII string from one to four characters, with default <code>LCL</code>.</p>
</dd>
<dt><code><strong>flag1 0 | 1</strong></code></dt>
<dd>
<p>Specifies a leap second to be inserted at the end of the current UTC day.</p>
</dd>
<dt><code><strong>flag2 0 | 1</strong></code></dt>
<dd>
<p>Specifies a leap second to be deleted at the end of the current UTC day.</p>
</dd>
<dt><code><strong>flag3 0 | 1</strong></code></dt>
<dd>
<p>Not used by this driver.</p>
</dd>
<dt><code><strong>flag4 0 | 1</strong></code></dt>
<dd>
<p>Not used by this driver.</p>
</dd>
</dl>
<hr>
<h4 id="additional-information">Additional Information</h4>
<p><a href="https://test.doc.ntp.org/documentation/3-5.93e/refclock/">Reference Clock Drivers</a></p>

	  
  </div>
</section>
<nav class="site-footer navbar navbar-expand-sm mt-auto">
  <div class="container">
      <ul class="navbar-nav">
        
        <li class="nav-item" title="Twitter" aria-label="Twitter">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
          <img src="https://test.doc.ntp.org/images/icons/twitter.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="LinkedIn" aria-label="LinkedIn">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
          <img src="https://test.doc.ntp.org/images/icons/linkedin.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="Facebook" aria-label="Facebook">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
          <img src="https://test.doc.ntp.org/images/icons/facebook.svg" width="20" height="20"></img>
          </a>
       </li>
       
	  </ul>
	  <ul class="mx-auto pt-3">
        <p>&copy; 2022 <a class="navbar-text text-white" href="https://www.nwtime.org/">Network Time Foundation</a></p>	
      </ul>
    </div>
</nav>
</body>
</html>