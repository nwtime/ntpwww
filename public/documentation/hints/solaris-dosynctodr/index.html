<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8"><meta name = "robots" content = "noindex">


  
  <meta name="description" content="
NOTE: This content is from SunSolve Article 19195 which once lived on the Sun Microsystems website.




SRDB ID
Synopsis
Date




19195
Upgraded to â€¦">
<meta property="og:title" content="Solaris Symptoms and Resolutions Article 19195" />
<meta property="og:description" content="NOTE: This content is from SunSolve Article 19195 which once lived on the Sun Microsystems website.
    SRDB ID Synopsis Date     19195 Upgraded to 2.6, using xntpd, but the system clock is drifting. Worked fine 4 Sep 1999     Problem Description Ever since upgrading to Solaris 2.6, the system clock has been drifting and there are messages like &lsquo;synchronisation lost&rsquo;, &lsquo;Previous time adjustment didn&rsquo;t complete&rsquo; and &lsquo;time reset (step)&rsquo; a lot in the /var/adm/messages file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://test.doc.ntp.org/documentation/hints/solaris-dosynctodr/" /><meta property="article:section" content="documentation" />

<meta property="article:modified_time" content="2022-04-01T13:48:53&#43;01:00" /><meta property="og:site_name" content="NTP: Network Time Protocol" />








  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel="stylesheet"/>
   
  <title>Solaris Symptoms and Resolutions Article 19195</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://test.doc.ntp.org/scss/nwtime.min.d583f4e59d35207a473045a722afed7a.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://test.doc.ntp.org/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://test.doc.ntp.org/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://test.doc.ntp.org/favicons/android-chrome-512x512.png" sizes="512x512"></head>
<body><!-- navigation -->

<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">


	<div>
	  <a class="navbar-brand" href="https://www.nwtime.org"><img height="80" width="80" src="https://test.doc.ntp.org/images/logo.png" alt=""></a>
	  <a class="navbar-brand" href="https://test.doc.ntp.org/"><img height="80" width="80" src="https://test.doc.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
    </div>


    <div>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/support/">Support</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/reflib/">Reference Library</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://test.doc.ntp.org/documentation/">Documentation</a>
        </button>
      
    </div>



</nav>


  <div class="header-border">
  </div>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://test.doc.ntp.org/documentation/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://test.doc.ntp.org/documentation/hints/">Hints</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://test.doc.ntp.org/documentation/hints/solaris-dosynctodr/">Solaris Symptoms and Resolutions Article 19195</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>Solaris Symptoms and Resolutions Article 19195</h1>
     
    <p style="font-size: small; color: grey;">Last update: April 1, 2022 13:48 UTC (<a href="https://bitbucket.nwtime.org/projects/WEBSITES/repos/ntpwww/commits/0d8b5fd77425c7b41b9b12b38eb585cc348537e5">0d8b5fd77</a>)</p>
	<blockquote>
<p><strong>NOTE:</strong> This content is from SunSolve Article 19195 which once lived on the Sun Microsystems website.</p>
</blockquote>
<table>
<thead>
<tr>
<th>SRDB ID</th>
<th>Synopsis</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td>19195</td>
<td>Upgraded to 2.6, using xntpd, but the system clock is drifting. Worked fine</td>
<td>4 Sep 1999</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="problem-description">Problem Description</h4>
<p>Ever since upgrading to Solaris 2.6, the system clock has been drifting and there are messages like &lsquo;synchronisation lost&rsquo;, &lsquo;Previous time adjustment didn&rsquo;t complete&rsquo; and &lsquo;time reset (step)&rsquo; a lot in the <code>/var/adm/messages</code> file. The system either was previously working fine with the freeware <code>xntpd</code> or the configuration was copied from another system that was  using the freeware version.</p>
<p>&ndash; 23-Apr-99 08:22 US/Eastern &ndash;</p>
<hr>
<h4 id="problem-solution">Problem Solution</h4>
<p>The common lore for setting up <code>xntpd</code> on Solaris using the freeware version included the warning to set the  kernel variable <code>dosynctodr</code> to 0 in the <code>/etc/system</code> file thus: <code>set dosynctodr=0</code>.</p>
<p>When using NTP on Solaris 2.6 or later, the kernel variable MUST be left at the default value of 1. Prior 
to 2.6 this variable controlled whether or not to rein in the softclock using the hardware clock, with the result that NTP and the hardware clock would fight for control of the soft clock; thus before 2.6 you had to set <code>dosynctodr</code> to 0. At 2.6, every system call that adjusts the softclock also sets the hard clock, thus while NTP controls the soft clock, the hard clock is also controlled. Setting <code>dosynctodr</code> to 0 reverts the behavior back to the pre 2.6 default behavior, having exactly the opposite effect as that intended.</p>
<p><strong>Do not set <code>dosynctodr</code> to 0.</strong></p>
<hr>
<dl>
<dt><strong>Product Area:</strong> <code>Bundled Network</code></dt>
<dd><strong>Product:</strong> NTP</dd>
<dd><strong>OS:</strong> Solaris 2.6</dd>
<dd><strong>Hardware:</strong> Ultra 2</dd>
<dd><strong>Document Content:</strong> 	with freeware <code>xntpd</code>.</dd>
</dl>

	  
  </div>
</section>
<nav class="site-footer navbar navbar-expand-sm mt-auto">
  <div class="container">
      <ul class="navbar-nav">
        
        <li class="nav-item" title="Twitter" aria-label="Twitter">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
          <img src="/images/icons/twitter.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="LinkedIn" aria-label="LinkedIn">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
          <img src="/images/icons/linkedin.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="Facebook" aria-label="Facebook">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
          <img src="/images/icons/facebook.svg" width="20" height="20"></img>
          </a>
       </li>
       
	  </ul>
	  <ul class="mx-auto pt-3">
        <p>&copy; 2022 <a class="navbar-text text-white" href="https://www.nwtime.org/">Network Time Foundation</a></p>	
      </ul>
    </div>
</nav>
</body>
</html>