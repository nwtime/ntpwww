<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8"><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
<link rel="canonical" href="https://www.ntp.org/documentation/hints/notes-xntp-v3/" />
  
  <meta property="og:title" content="Notes for NTPv3" />
<meta property="og:description" content="This version operates in much the same manner as Version 2 with the following changes and additions:
  The protocol machinery operates in conformance with the RFC 1305 NTP Version 3 specification. The most visible characteristic of this version is that the poll intervals for all polls, even selected ones, is significantly increased. This is especially desirable when serving a large client population. This implementation supports previous versions as non-configured peers; for version-2 configured peers a version 2 keyword should be included on the peer line." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ntp.org/documentation/hints/notes-xntp-v3/" /><meta property="og:image" content="https://www.ntp.org/images/NTPLogo800x418.webp"/><meta property="article:section" content="documentation" />

<meta property="article:modified_time" content="2022-05-04T17:05:38&#43;01:00" /><meta property="og:site_name" content="NTP: Network Time Protocol" />


<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.ntp.org/images/NTPLogo800x418.webp"/>

<meta name="twitter:title" content="Notes for NTPv3"/>
<meta name="twitter:description" content="This version operates in much the same manner as Version 2 with the following changes and additions:
  The protocol machinery operates in conformance with the RFC 1305 NTP Version 3 specification. The most visible characteristic of this version is that the poll intervals for all polls, even selected ones, is significantly increased. This is especially desirable when serving a large client population. This implementation supports previous versions as non-configured peers; for version-2 configured peers a version 2 keyword should be included on the peer line."/>





<script async src="https://www.googletagmanager.com/gtag/js?id=G-BN61ZTDHBP"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-BN61ZTDHBP', { 'anonymize_ip': true });
</script>




<script>
window.onload = demo;
function demo() {
    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search...")
}
</script>


<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "c33igkoodm");
</script>


  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel="stylesheet"/>
   
  <title>Notes for NTPv3</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The NTP Project conducts Research and Development in NTP, a protocol designed to synchronize the clocks of computers over a network to a common timebase.">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://www.ntp.org/scss/nwtime.min.88a7f853c9f0350ac0942eda114d25cc.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://www.ntp.org/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://www.ntp.org/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/android-chrome-512x512.png" sizes="512x512"></head>
<body><!-- navigation -->

<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">


	<div>
	  <a class="navbar-brand" href="https://www.nwtime.org"><img height="80" width="80" src="https://www.ntp.org/images/logo.png" alt=""></a>
	  <a class="navbar-brand" href="https://www.ntp.org/"><img height="80" width="80" src="https://www.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
    </div>


    <div>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/support/">Support</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/reflib/">Reference Library</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/current-stable/">Documentation</a>
        </button>
      
	
	  <button class="btn btn-primary btn-lg" type="button"><a class="nav-item btn btn-primary btn-lg" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/donate/">Support NTP<br>Donate Today!</a>
      </button>
    </div>



<script async src="https://cse.google.com/cse.js?cx=bb3c9b3e375d856be"></script>
  <div class="gcse-search">
  </div>

</nav>


  <div class="header-border">
  </div>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://www.ntp.org/documentation/">NTP Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://www.ntp.org/documentation/hints/">Hints</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://www.ntp.org/documentation/hints/notes-xntp-v3/">Notes for NTPv3</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>Notes for NTPv3</h1> 
    <p style="font-size: small; color: grey;">Last update: May 4, 2022 17:05 UTC (<a href="https://git.nwtime.org/websites/ntpwww/commit/dbea9b7d4daf047a65cdfd64d621e7efa23484da">dbea9b7d4</a>)</p>
	<p>This version operates in much the same manner as Version 2 with the following changes and additions:</p>
<ol>
<li>
<p>The protocol machinery operates in conformance with the <a href="https://www.ntp.org/reflib/rfc/rfc1305/rfc1305b.pdf">RFC 1305</a> NTP Version 3 specification. The most visible characteristic of this version is that the poll intervals for all polls, even selected ones, is significantly increased. This is especially desirable when serving a large client population. This implementation supports previous versions as non-configured peers; for version-2 configured peers a <code>version 2</code> keyword should be included on the <code>peer</code> line.</p>
</li>
<li>
<p>The configuration file has a new keyword: <code>statfile &lt;file&gt;</code>, where <code>&lt;file&gt;</code> is the name of a statistics file. When present, each clock update generates an entry of the form:</p>
<p><code>&lt;day&gt; &lt;sec&gt;.&lt;frac&gt; &lt;addr&gt; &lt;status&gt; &lt;offset&gt; &lt;delay&gt; &lt;disp&gt;</code></p>
<p>where <code>&lt;day&gt;</code> is the modified Julian day, <code>&lt;sec&gt;.&lt;frac&gt;</code> is the time of day, <code>&lt;addr&gt;</code> is the peer address and <code>&lt;status&gt;</code> is the peer status. The <code>&lt;offset&gt;, &lt;delay&gt;</code> and <code>&lt;disp&gt;</code> are the measured offset, delay and dispersion, respectively, of the peer clock relative to the local clock. About once per day the current file is closed and a new one created with names <code>&lt;file&gt;.&lt;gen&gt;</code>, where <code>&lt;gen&gt;</code> starts at one and increments for each new generation.</p>
</li>
<li>
<p>A number of additional platforms are supported. See <code>./Config</code> file for details.</p>
</li>
<li>
<p>A driver for the TrueTime 468DC GOES Synchronized Clock is included. This driver (<code>refclock_goes.c</code>) should also work for other TrueTime radio clocks, since all use the same format.</p>
</li>
<li>
<p>A replacement driver for the Spectracom 8170 WWVB Synchronized Clock is included. This driver (<code>refclock_wwvb.c</code>) (a) does not require a 1-pulse-per-second signal, (b) supports both format 0 (original 8170) and format 2 (Netclock/2 and upgraded 8170), (c) can be connected to more than one computer and (d) automatically compensates for all serial baud rates.</p>
</li>
<li>
<p>A driver for the German time/frequency station DCF77 is included. This requires a special STREAMS module.</p>
</li>
<li>
<p>In Version 2 special line-discipline modules were required for the CHU and WWVB drivers. This code continues to work in Version 3, although it is no longer needed for the WWVB driver. However, this code does not work under STREAMS, as used in SunOS 4.1.1. Equivalent STREAMS modules are supplied with Version 3.</p>
</li>
<li>
<p>Support for an external 1-pulse-per-second (pps) signal is provided. The signal is connected to a serial port (see <code>xntpd/ntp_loopfilter.c</code> for details). When present the leading edge of the pulse establishes the on-time epoch within an interval established by the selected radio clock or other NTP time server. Use of the pps is indicated when the tattletale displayed by <code>ntpq</code> changes from <code>*</code> to <code>o</code>.</p>
</li>
<li>
<p>The clock-selection and poll-update procedures have been modified slightly in order to achieve better performance on high speed LANs with compromise in performance on typical WANs.</p>
</li>
<li>
<p>In order to comply with U.S. Commerce Department regulations, the DES encryption routine <code>lib/authdes.c</code> cannot be exported. For exportable versions of this distribution a DES-encrypted version of this routine <code>lib/authdes.c.des</code> is included along with an unencrypted version <code>lib/authdes.c.export</code>, which allows normal operation, but without the NTP authentication feature. Further information is available in the <code>lib/authdes.c.export</code> file.</p>
</li>
<li>
<p>As an alternative to the DES-based authentication mechanism, an implementation of the RSA Message Digest 5 algorithm is provided. (see applicable copyright information in the library files).</p>
</li>
<li>
<p>A driver for the Magnavox MX4200 GPS clock.</p>
</li>
<li>
<p>A STREAMS module which captures carrier-detect data-lead transitions to connect a precision source of 1-pps, yet avoid the ugly overhead in the usual STREAMS processing. See the <code>ppsclock</code> subdirectory.</p>
</li>
<li>
<p>Support for the Apple A/UX operating system and enhanced support for the Hewlet-Packard HP/UX operating system. See the various <code>README</code> and <code>Config</code> files for further information.</p>
</li>
</ol>
<p>See the <code>COPYRIGHT</code> file for authors and copyright information. Note that some modules in this distribution contain copyright information that supersedes the copyright information in that file.</p>
<p>If I missed something or neglected to give due credit, please advise.</p>
<dl>
<dt>David L. Mills</dt>
<dd>University of Delaware</dd>
<dd>31 May 1992, amended 23 July 1992, 25 October 1992</dd>
</dl>
<h4 id="bugs-and-notes">Bugs and notes</h4>
<p>A bug in the original <code>tty_clk_STREAMS.c</code> module has been fixed.</p>
<p>The poll-interval randomization feature of poll_update (in <code>xntpd/ntp_proto.c</code>) has been extended to apply when the poll interval is increased, as well as reduced. This spreads the update messages in time
and helps avoid unpleasant bursts of messages.</p>
<p>In the <code>clock_select</code> algorithm the peers selected for combining are limited to those survivors at the lowest stratum, not the entire list. This helps avoid whiplash when large numbers of peers are at the same
stratum.</p>
<p>The number formerly displayed by <code>ntpq</code> as &ldquo;compliance&rdquo; is now the time constant of integration.</p>
<p>The DNS resolver <code>xntpd/ntp_intres.c</code> is now integrated into <code>xntpd</code>, making configuration of multiple hosts easier.</p>
<p>System and peer events are now written to the system log at priority <code>LOG_INFO</code>.</p>
<p>The leap-second code was fixed to avoid broadcasting leap warnings on all except the last day of June and December.</p>

	  
  </div>
</section>
<nav class="site-footer navbar navbar-expand-sm mt-auto">
  <div class="container">
      <ul class="navbar-nav">
        
        <li class="nav-item" title="LinkedIn" aria-label="LinkedIn">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
          <img src="https://www.ntp.org/images/icons/linkedin.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="Facebook" aria-label="Facebook">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
          <img src="https://www.ntp.org/images/icons/facebook.svg" width="20" height="20"></img>
          </a>
       </li>
       
	  </ul>
	  <ul class="mx-auto pt-3">
        <p>&copy; 2024 <a class="navbar-text text-white" href="https://www.nwtime.org/">Network Time Foundation</a></p>	
      </ul>
    </div>
</nav>
</body>
</html>