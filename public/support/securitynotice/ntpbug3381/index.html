<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW"><link rel="canonical" href="https://www.ntp.org/support/securitynotice/ntpbug3381/" />
  
  <meta property="og:title" content="NTP BUG 3381: Copious amounts of Unused Code" />
<meta property="og:description" content="Statically included external projects potentially introduce several problems and the issue of having extensive amounts of dead code in the resulting binary must clearly be pointed out. This bug was resolved in NTP 4.2.8p10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.ntp.org/support/securitynotice/ntpbug3381/" /><meta property="og:image" content="https://www.ntp.org/images/NTPLogo800x418.webp"/><meta property="article:section" content="support" />
<meta property="article:published_time" content="2017-03-21T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-02-14T13:55:59&#43;00:00" /><meta property="og:site_name" content="NTP: Network Time Protocol" />



<script async src="https://www.googletagmanager.com/gtag/js?id=G-K07ZJQFYSZ"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-K07ZJQFYSZ', { 'anonymize_ip': true });
</script>





<script>
window.onload = demo;
function demo() {
    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search...")
}
</script>


<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "c33igkoodm");
</script>


  
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,800,800i,900i&display=swap" rel="stylesheet"/>
   
  <title>NTP BUG 3381: Copious amounts of Unused Code</title>

  <!-- Mobile Responsive Meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Statically included external projects potentially introduce several problems and the issue of having extensive amounts of dead code in the resulting binary must clearly be pointed out. This bug was resolved in NTP 4.2.8p10.">
  
  <meta name="generator" content="Hugo 0.83.1" />

  <!-- Plugins -->
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://www.ntp.org/scss/nwtime.min.1de55a903767bacfaee426f1958345df.css" media="screen">

  <!-- Favicon -->
  <link rel="shortcut icon" href="https://www.ntp.org/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="https://www.ntp.org/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://www.ntp.org/favicons/android-chrome-512x512.png" sizes="512x512"></head>
<body><!-- navigation -->

<nav class="navbar navbar-expand-lg navbar-light">
  <div class="container-fluid">


	<div>
	  <a class="navbar-brand" href="https://www.nwtime.org"><img height="80" width="80" src="https://www.ntp.org/images/logo.png" alt=""></a>
	  <a class="navbar-brand" href="https://www.ntp.org/"><img height="80" width="80" src="https://www.ntp.org/images/ntp_logo.jpg" alt="NTP: Network Time Protocol"></a> 
    </div>


    <div>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/support/">Support</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/reflib/">Reference Library</a>
        </button>
      
		<button class="btn btn-light btn-lg" type="button" aria-expanded="false"><a class="nav-item" style="text-decoration: none; text-transform: uppercase" href="https://www.ntp.org/documentation/">Documentation</a>
        </button>
      
    </div>



<script async src="https://cse.google.com/cse.js?cx=bb3c9b3e375d856be"></script>
  <div class="gcse-search">
  </div>

</nav>


  <div class="header-border">
  </div>
<!-- /navigation --><nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://www.ntp.org/support/">Support</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://www.ntp.org/support/securitynotice/">Security</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://www.ntp.org/support/securitynotice/ntpbug3381/">NTP BUG 3381: Copious amounts of Unused Code</a>
</li>

	</ol>
</nav	>


<section class="section pt-0  pb-auto">
  <div class="container">
  	<h1>NTP BUG 3381: Copious amounts of Unused Code</h1> 
    <p style="font-size: small; color: grey;">Last update: February 14, 2022 13:55 UTC (<a href="https://bitbucket.nwtime.org/projects/WEBSITES/repos/ntpwww/commits/b6ca43fd1d59db7d1728fed0954576629f66df8a">b6ca43fd1</a>)</p>
	<hr>
<h4 id="summary">Summary</h4>
<table>
  <tbody>
	<tr>
		<th><b>Resolved</b></th>
		<td><a href="https://www.ntp.org/support/securitynotice/4_2_8p10-release-announcement/">4.2.8p10</a></td>
		<td>21 Mar 2017</td>
	</tr>
	<tr>
		<th><b>References</b></th>
		<td><a href="https://bugs.ntp.org/show_bug.cgi?id=3381">Bug 3381</a></td>
		<td></td>
	</tr>
  </tbody>	
</table>
<hr>
<h4 id="description">Description</h4>
<p>The report says: Statically included external projects potentially introduce several problems and the issue of having extensive amounts of code that is “dead” in the resulting binary must clearly be pointed out. The unnecessary unused code may or may not contain bugs and, quite possibly, might be leveraged for code-gadget-based branch-flow redirection exploits. Analogically, having source trees statically included as well means a failure in taking advantage of the free feature for periodical updates. This solution is offered by the system’s Package Manager. The three libraries identified are <code>libisc</code>, <code>libevent</code>, and <code>libopts</code>.</p>
<hr>
<h4 id="resolution">Resolution</h4>
<ul>
<li>For <code>libisc</code>, we already only use a portion of the original library. We&rsquo;ve found and fixed bugs in the original implementation (and offered the patches to ISC), and plan to see what has changed since we last upgraded the code. <code>libisc</code> is generally not installed, and when it it we usually only see the static <code>libisc.a</code> file installed. Until we know for sure that the bugs we&rsquo;ve found and fixed are fixed upstream, we&rsquo;re better off with the copy we are using.</li>
<li>Version 1 of <code>libevent</code> was the only production version available until recently, and we&rsquo;ve been requiring version 2 for a long time. But if the build system has at least version 2 of <code>libevent</code> installed, we&rsquo;ll use the version that is installed on the system. Otherwise, we provide a copy of <code>libevent</code> that we know works.</li>
<li><code>libopts</code> is provided by GNU AutoGen, and that library and package undergoes frequent API version updates. The version of <code>autogen</code> used to generate the tables for the code must match the API version in <code>libopts</code>. AutoGen can be &hellip; difficult to build and install, and very few developers really need it. So we have it on our build and development machines, and we provide the specific version of the <code>libopts</code> code in the distribution to make sure that the proper API version of <code>libopts</code> is available.</li>
<li>As for the point about there being code in these libraries that NTP doesn&rsquo;t use, OK. But other packages used these libraries as well, and it is reasonable to assume that other people are paying attention to security and code quality issues for the overall libraries. It takes significant resources to analyze and customize these libraries to only include what we need, and to date we believe the cost of this effort does not justify the benefit.</li>
</ul>
<hr>
<h4 id="credit">Credit</h4>
<p>This issue was discovered by Cure53.</p>
<hr>
<h4 id="timeline">Timeline</h4>
<ul>
<li>2017 Mar 21: Public release</li>
<li>2017 Mar 06: <a href="https://www.nwtime.org/membership/benefits/">Early Access Program Release: Premier and Partner Institutional Members</a></li>
<li>2017 Mar 06: <a href="https://www.nwtime.org/membership/benefits/">Notification to Institutional Members</a></li>
<li>2017 Feb 09: Mozilla/Cure53 audit received</li>
</ul>

	  
  </div>
</section>
<nav class="site-footer navbar navbar-expand-sm mt-auto">
  <div class="container">
      <ul class="navbar-nav">
        
        <li class="nav-item" title="Twitter" aria-label="Twitter">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ntp">
          <img src="https://www.ntp.org/images/icons/twitter.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="LinkedIn" aria-label="LinkedIn">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/4651343">
          <img src="https://www.ntp.org/images/icons/linkedin.svg" width="20" height="20"></img>
          </a>
       </li>
       
        <li class="nav-item" title="Facebook" aria-label="Facebook">
          <a class="nav-link" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/networktimeprotocol">
          <img src="https://www.ntp.org/images/icons/facebook.svg" width="20" height="20"></img>
          </a>
       </li>
       
	  </ul>
	  <ul class="mx-auto pt-3">
        <p>&copy; 2022 <a class="navbar-text text-white" href="https://www.nwtime.org/">Network Time Foundation</a></p>	
      </ul>
    </div>
</nav>
</body>
</html>